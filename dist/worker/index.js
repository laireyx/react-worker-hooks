"use strict";var c=Object.defineProperty;var d=(t,e,s)=>e in t?c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>(d(t,typeof e!="symbol"?e+"":e,s),s);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});class i{constructor(){n(this,"handlers",new Map);n(this,"handleRequest",async e=>{const{eventType:s,eventSeq:o,args:l}=e.data;try{const r=this.handlers.get(s);if(!r)throw new TypeError(`Invalid event type: ${String(s)} does not have any handler`);const a={eventType:s,eventSeq:o,result:{success:!0,response:await r(...l)}};self.postMessage(a)}catch(r){const a={eventType:s,eventSeq:o,result:{success:!1,reason:r}};self.postMessage(a)}});n(this,"on",(e,s)=>{this.handlers.set(e,s)});self.addEventListener("message",e=>void this.handleRequest(e))}}exports.WorkerBridge=i;
